{% extends 'base.html' %}
{% block content %}
<div class="container">
  <div class="row mb-4">
    <div class="col">
      <h1 class="display-5 fw-bold">Vendor Orders</h1>
    </div>
  </div>

  <div class="card shadow-sm">
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-hover">
          <thead class="table-light">
            <tr>
              <th>ID</th>
              <th>Total</th>
              <th>Payment</th>
              <th>Method</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for o in orders %}
            <tr>
              <td>#{{ o.id }}</td>
              <td>MWK {{ o.total_amount_mwk }}</td>
              <td>
                <span class="badge 
                  {% if o.payment_status == 'paid' %}bg-success
                  {% else %}bg-warning text-dark
                  {% endif %}">
                  {{ o.payment_status }}
                </span>
              </td>
              <td>
                <span class="badge 
                  {% if o.payment_method == 'cod' %}bg-info
                  {% elif o.payment_method == 'manual' %}bg-secondary
                  {% else %}bg-primary
                  {% endif %}">
                  {{ o.payment_method|upper }}
                </span>
              </td>
              <td>
                {% if o.payment_method == 'cod' and o.payment_status != 'paid' %}
                <a href="/vendor/orders/{{ o.id }}/cod-collected/" class="btn btn-sm btn-success">Mark COD Collected</a>
                {% endif %}
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="5" class="text-center py-4">No orders found.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}